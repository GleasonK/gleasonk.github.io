<html>
<head>
	<title>Binary Matrix to QR Code</title>
	<style>
		#qr div{
			width: 20px;
			height: 20px;
			display: inline-block;
		}
		
		.black {
			background: black;
		}
	</style>
</head>
<body>

	<textarea id="binCode" rows=25 cols=50></textarea> <br>
	<button onclick="generate()">Generate QR</button><button onclick="sample()">Sample</button>
	
	<div id="qr"></div>

</body>

<script type="text/javascript">
	var binaryArea = document.getElementById("binCode");
	var codeArea   = document.getElementById("qr");
	
	function generate(){
		var binary = binaryArea.value.replace(/ /g, '');
		var patt = new RegExp("^[10\n]+$");
		var valid = patt.test(binary);
		if (!valid){
			alert("Invalid input. Must only contain 1s 0s and new lines.");
			return;
		}
		qr.innerHTML = "";
		for (var i = 0; i < binary.length; i++) {
			switch(binary[i]){
			case "1":
				qr.innerHTML += "<div class='black'></div>"	;
				break;
			case "0":
				qr.innerHTML += "<div></div>";
				break;
			case "\n":
				qr.innerHTML += "<br/>";
				break;
			}
		}
	}
	
	function sample(){
		var sample = "111111100011101111111\n\
100000101110101000001\n\
101110100011101011101\n\
101110101100101011101\n\
101110100100101011101\n\
100000101001001000001\n\
111111101010101111111\n\
000000000100000000000\n\
111110111001010101010\n\
010000000110100010101\n\
100110101010111001110\n\
001000001100110001110\n\
000101110111001100011\n\
000000001000010111001\n\
111111101111110000010\n\
100000100100110111110\n\
101110101111001101011\n\
101110101100000110000\n\
101110101001101001100\n\
100000101011110100100\n\
111111101010101100010"
		
		binaryArea.value = sample;
	
	}
</script>

</html>